<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FlipTilesApp</title>
  <style>
    :root{
      --bg:#0b0d10; --panel:#151a20; --text:#eaf2f9; --muted:#8aa0b3; --accent:#0ea5e9;
      --shadow: 0 18px 50px rgba(0,0,0,.55);
      --radius: 18px;
      --border: 1px solid color-mix(in oklab, var(--muted) 35%, transparent);
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f7fafc; --panel:#ffffff; --text:#0b1321; --muted:#52616f; --shadow: 0 12px 30px rgba(0,0,0,.14); }
    }
    html,body{ height:100%; }
    body{
      margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial;
      background:var(--bg); color:var(--text);
      display:grid; place-items:center;
      padding: 18px;
    }
    .card{
      width:min(760px, 100%);
      background: color-mix(in oklab, var(--panel) 92%, transparent);
      border: var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
    }
    h1{ margin:0 0 8px 0; font-size: clamp(22px, 3vw, 30px); }
    p{ margin:0 0 16px 0; color: var(--muted); font-size: 15.5px; line-height:1.45; }

    .bigbtn{
      width:100%;
      display:flex; align-items:center; justify-content:center;
      gap: 10px;
      border:none;
      border-radius: 16px;
      padding: 18px 18px;
      font-size: 18px;
      font-weight: 800;
      color: white;
      background: linear-gradient(135deg, #0ea5e9, #2563eb);
      cursor:pointer;
      box-shadow: 0 10px 24px rgba(14,165,233,.35);
      touch-action: manipulation;
      -webkit-tap-highlight-color: rgba(0,0,0,0);
    }
    .bigbtn:active{ transform: translateY(1px); }

    .row{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (min-width: 700px){
      .row{ grid-template-columns: 1fr 1fr; }
    }

    .smallbtn{
      width:100%;
      display:flex; align-items:center; justify-content:space-between;
      border: var(--border);
      border-radius: 14px;
      padding: 14px 14px;
      background: var(--panel);
      color: var(--text);
      font-size: 15px;
      cursor:pointer;
      touch-action: manipulation;
    }
    .smallbtn span{ color: var(--muted); font-weight:700; }

    .hint{
      margin-top:14px;
      font-size: 14px;
      color: var(--muted);
      border-top: var(--border);
      padding-top: 12px;
    }
    code{
      background: color-mix(in oklab, var(--panel) 82%, transparent);
      padding: 2px 6px;
      border-radius: 8px;
      border:1px solid color-mix(in oklab, var(--muted) 25%, transparent);
    }

    .qrWrap{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      align-items:start;
      border-top: var(--border);
      padding-top: 16px;
    }
    @media (min-width: 820px){
      .qrWrap{ grid-template-columns: 1.1fr .9fr; }
    }
    .qrBox{
      border: var(--border);
      border-radius: 16px;
      background: var(--panel);
      padding: 14px;
    }
    .qrTitle{
      font-weight:800;
      margin: 0 0 8px 0;
      font-size: 15px;
    }
    .qrRow{
      display:flex;
      gap: 12px;
      align-items:center;
      flex-wrap:wrap;
    }
    canvas#qrCanvas{
      width: 160px;
      height: 160px;
      image-rendering: pixelated;
      border-radius: 12px;
      background: white;
      padding: 10px;
      border: 1px solid rgba(0,0,0,.12);
    }
    .qrText{
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
      max-width: 340px;
    }
    .urlBox{
      margin-top:10px;
      font-size: 13px;
      color: var(--muted);
      word-break: break-all;
    }
    .kbd{
      display:inline-block;
      padding: 2px 7px;
      border-radius: 8px;
      border: 1px solid color-mix(in oklab, var(--muted) 35%, transparent);
      background: color-mix(in oklab, var(--panel) 85%, transparent);
      color: var(--text);
      font-weight: 700;
      font-size: 12px;
      vertical-align: 1px;
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-label="FlipTilesApp start">
    <h1>FlipTilesApp</h1>
    <p>Gebruik de grote knop. Voor iPhone/iPad: zet daarna op het beginscherm (optioneel).</p>

    <button class="bigbtn" id="openAppBtn" type="button" aria-label="Open FlipTilesApp">
      ▶ Open FlipTilesApp
    </button>

    <div class="row" aria-label="Extra opties">
      <button class="smallbtn" id="openNewTabBtn" type="button">
        Open in nieuw tabblad <span>Desktop/Laptop</span>
      </button>
      <button class="smallbtn" id="copyLinkBtn" type="button">
        Kopieer link <span>Appen/Mailen</span>
      </button>
      <button class="smallbtn" id="addHomeBtn" type="button">
        Zet op beginscherm <span>iPhone/iPad/Android</span>
      </button>
      <button class="smallbtn" id="helpBtn" type="button">
        Korte hulp (1 minuut) <span>Voor iedereen</span>
      </button>
    </div>

    <div class="hint" id="hint"></div>

    <div class="qrWrap">
      <div class="qrBox">
        <div class="qrTitle">QR-code (scan met camera)</div>
        <div class="qrRow">
          <canvas id="qrCanvas" width="200" height="200" aria-label="QR-code"></canvas>
          <div class="qrText">
            1) Open de <b>Camera</b> en scan<br/>
            2) Tik op de link<br/>
            3) Tik <b>Open FlipTilesApp</b><br/>
            4) Optioneel: <b>Deel</b> → <b>Zet op beginscherm</b>
          </div>
        </div>
        <div class="urlBox" id="urlBox"></div>
      </div>

      <div class="qrBox">
        <div class="qrTitle">Beginscherm-instructie (kort)</div>
        <div class="qrText" id="deviceHelp">
          iPhone/iPad (Safari): <b>Deel</b> → <b>Zet op beginscherm</b><br/>
          Android (Chrome): <b>Menu ⋮</b> → <b>Add to Home screen</b><br/>
          Mac/Windows: maak een bladwijzer of pin tab.
        </div>
        <div class="urlBox">
          Tip: op desktop werkt ook <span class="kbd">Enter</span> om te openen.
        </div>
      </div>
    </div>
  </div>

<script>
(function(){
  const START_URL = "https://kmans-old.github.io/fliptilesapp/";
  const APP_URL   = "./app.html";

  const hint = document.getElementById('hint');
  const urlBox = document.getElementById('urlBox');
  urlBox.textContent = "Link: " + START_URL;

  // Open app (zelfde tab)
  function openApp(sameTab){
    if(sameTab) window.location.href = APP_URL;
    else window.open(APP_URL, "_blank", "noopener");
  }

  document.getElementById('openAppBtn').addEventListener('click', ()=> openApp(true));
  document.getElementById('openNewTabBtn').addEventListener('click', ()=> openApp(false));

  // Enter als snelstart (desktop)
  window.addEventListener('keydown', (e)=>{
    if(e.key === "Enter"){
      // Niet als je net op een knop focust met Enter, dan dubbel
      if(document.activeElement && (document.activeElement.tagName === "BUTTON")) return;
      openApp(true);
    }
  });

  // Copy link
  document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(START_URL);
      hint.innerHTML = 'Link gekopieerd. Plak in WhatsApp of Mail.';
    }catch(e){
      hint.innerHTML = 'Kopiëren lukt niet automatisch. Selecteer en kopieer deze link: <code>' + START_URL + '</code>';
    }
  });

  // Beginscherm-hulp
  document.getElementById('addHomeBtn').addEventListener('click', ()=>{
    hint.innerHTML =
      '<b>iPhone/iPad (Safari):</b> Deel (vierkantje met pijltje) → <b>Zet op beginscherm</b><br>' +
      '<b>Android (Chrome):</b> Menu ⋮ → <b>Add to Home screen</b>';
  });

  // Korte hulp
  document.getElementById('helpBtn').addEventListener('click', ()=>{
    hint.innerHTML =
      'Werkwijze: <code>Foto</code> / <code>Tekst</code> vullen → <code>Opslaan</code>.<br>' +
      'Tekst-overzicht: klik <code>Lijst</code> en print via de browser.';
  });

  // Check: bestaat app.html?
  fetch(APP_URL, { method:'HEAD' }).then(r=>{
    if(!r.ok){
      hint.innerHTML = 'Let op: <code>app.html</code> ontbreekt. Upload je FlipTilesApp als <code>app.html</code>.';
    }
  }).catch(()=>{});

  // ==== QR-code generator (klein, zonder externe libs) ====
  // Gebruikt de publieke QR API als "beeldbron", maar rendert hem in canvas.
  // Robuust, en jij hoeft niets extra’s te uploaden.
  const qrCanvas = document.getElementById("qrCanvas");
  const ctx = qrCanvas.getContext("2d");
  const img = new Image();
  img.crossOrigin = "anonymous";
  const qrApi = "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" + encodeURIComponent(START_URL);

  img.onload = ()=>{
    ctx.clearRect(0,0,qrCanvas.width, qrCanvas.height);
    // witte achtergrond
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0,0,qrCanvas.width, qrCanvas.height);
    // QR erin
    ctx.drawImage(img, 0,0, qrCanvas.width, qrCanvas.height);
  };
  img.onerror = ()=>{
    // fallback tekst
    ctx.clearRect(0,0,qrCanvas.width, qrCanvas.height);
    ctx.fillStyle = "#ffffff"; ctx.fillRect(0,0,qrCanvas.width, qrCanvas.height);
    ctx.fillStyle = "#000"; ctx.font = "14px system-ui";
    ctx.fillText("QR laden mislukt.", 18, 98);
  };
  img.src = qrApi;

})();
</script>
</body>
</html>
