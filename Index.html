<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>FlipTilesApp – Start</title>
  <style>
    :root{
      --bg:#0b0d10; --panel:#151a20; --text:#eaf2f9; --muted:#8aa0b3; --accent:#0ea5e9;
      --shadow: 0 18px 50px rgba(0,0,0,.55);
      --radius: 18px;
      --border: 1px solid color-mix(in oklab, var(--muted) 35%, transparent);
    }
    @media (prefers-color-scheme: light){
      :root{ --bg:#f7fafc; --panel:#ffffff; --text:#0b1321; --muted:#52616f; --shadow: 0 12px 30px rgba(0,0,0,.14); }
    }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,Helvetica Neue,Arial;
      background:var(--bg); color:var(--text);
      display:grid; place-items:center;
      padding: 18px;
    }
    .card{
      width:min(820px, 100%);
      background: color-mix(in oklab, var(--panel) 92%, transparent);
      border: var(--border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px;
    }
    h1{ margin:0 0 8px 0; font-size: clamp(22px, 3vw, 30px); }
    p{ margin:0 0 16px 0; color: var(--muted); font-size: 15.5px; line-height:1.45; }

    .bigRow{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (min-width: 740px){
      .bigRow{ grid-template-columns: 1fr 1fr; }
    }

    .bigbtn{
      width:100%;
      display:flex; align-items:center; justify-content:center;
      gap: 10px;
      border:none;
      border-radius: 16px;
      padding: 18px 18px;
      font-size: 18px;
      font-weight: 900;
      color: white;
      cursor:pointer;
      box-shadow: 0 10px 24px rgba(14,165,233,.30);
      touch-action: manipulation;
      -webkit-tap-highlight-color: rgba(0,0,0,0);
    }
    .bigbtn:active{ transform: translateY(1px); }
    .btn30{ background: linear-gradient(135deg, #0ea5e9, #2563eb); }
    .btn140{ background: linear-gradient(135deg, #22c55e, #16a34a); box-shadow: 0 10px 24px rgba(34,197,94,.28); }

    .row{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 12px;
    }
    @media (min-width: 700px){
      .row{ grid-template-columns: 1fr 1fr; }
    }

    .smallbtn{
      width:100%;
      display:flex; align-items:center; justify-content:space-between;
      border: var(--border);
      border-radius: 14px;
      padding: 14px 14px;
      background: var(--panel);
      color: var(--text);
      font-size: 15px;
      cursor:pointer;
      touch-action: manipulation;
    }
    .smallbtn span{ color: var(--muted); font-weight:700; }

    .hint{
      margin-top:14px;
      font-size: 14px;
      color: var(--muted);
      border-top: var(--border);
      padding-top: 12px;
      min-height: 1.4em;
    }
    code{
      background: color-mix(in oklab, var(--panel) 82%, transparent);
      padding: 2px 6px;
      border-radius: 8px;
      border:1px solid color-mix(in oklab, var(--muted) 25%, transparent);
    }

    .qrWrap{
      margin-top: 16px;
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
      align-items:start;
      border-top: var(--border);
      padding-top: 16px;
    }
    @media (min-width: 820px){
      .qrWrap{ grid-template-columns: 1.1fr .9fr; }
    }
    .qrBox{
      border: var(--border);
      border-radius: 16px;
      background: var(--panel);
      padding: 14px;
    }
    .qrTitle{
      font-weight:900;
      margin: 0 0 8px 0;
      font-size: 15px;
    }
    .qrRow{
      display:flex;
      gap: 12px;
      align-items:center;
      flex-wrap:wrap;
    }
    canvas#qrCanvas{
      width: 160px;
      height: 160px;
      image-rendering: pixelated;
      border-radius: 12px;
      background: white;
      padding: 10px;
      border: 1px solid rgba(0,0,0,.12);
    }
    .qrText{
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
      max-width: 360px;
    }
    .urlBox{
      margin-top:10px;
      font-size: 13px;
      color: var(--muted);
      word-break: break-all;
    }
    .kbd{
      display:inline-block;
      padding: 2px 7px;
      border-radius: 8px;
      border: 1px solid color-mix(in oklab, var(--muted) 35%, transparent);
      background: color-mix(in oklab, var(--panel) 85%, transparent);
      color: var(--text);
      font-weight: 700;
      font-size: 12px;
      vertical-align: 1px;
    }
  </style>
</head>
<body>
  <div class="card" role="main" aria-label="FlipTilesApp start">
    <h1>FlipTilesApp – Startmenu</h1>
    <p>Kies één van de twee versies. Op iPhone/iPad: open via Safari en zet daarna op beginscherm (optioneel).</p>

    <div class="bigRow">
      <button class="bigbtn btn30" id="open30Btn" type="button" aria-label="Open FTA30+T">
        ▶ Open FTA30+T (30 tegels)
      </button>
      <button class="bigbtn btn140" id="open140Btn" type="button" aria-label="Open FTA140T">
        ▶ Open FTA140T (140 tegels)
      </button>
    </div>

    <div class="row" aria-label="Extra opties">
      <button class="smallbtn" id="openNewTabBtn" type="button">
        Open menu in nieuw tabblad <span>Desktop</span>
      </button>
      <button class="smallbtn" id="copyLinkBtn" type="button">
        Kopieer menulink <span>Appen/Mailen</span>
      </button>
      <button class="smallbtn" id="addHomeBtn" type="button">
        Zet menu op beginscherm <span>iPhone/iPad/Android</span>
      </button>
      <button class="smallbtn" id="helpBtn" type="button">
        Korte hulp (1 minuut) <span>Voor iedereen</span>
      </button>
    </div>

    <div class="hint" id="hint"></div>

    <div class="qrWrap">
      <div class="qrBox">
        <div class="qrTitle">QR-code (menu)</div>
        <div class="qrRow">
          <canvas id="qrCanvas" width="200" height="200" aria-label="QR-code"></canvas>
          <div class="qrText">
            1) Open de <b>Camera</b> en scan<br/>
            2) Tik op de link (menu)<br/>
            3) Kies <b>FTA30+T</b> of <b>FTA140T</b><br/>
            4) Optioneel: <b>Deel</b> → <b>Zet op beginscherm</b>
          </div>
        </div>
        <div class="urlBox" id="urlBox"></div>
      </div>

      <div class="qrBox">
        <div class="qrTitle">Beginscherm-instructie (kort)</div>
        <div class="qrText">
          iPhone/iPad (Safari): <b>Deel</b> → <b>Zet op beginscherm</b><br/>
          Android (Chrome): <b>Menu ⋮</b> → <b>Add to Home screen</b><br/>
          Mac/Windows: maak een bladwijzer of pin tab.
        </div>
        <div class="urlBox">Tip: op desktop werkt ook <span class="kbd">Enter</span> om FTA140T te openen.</div>
      </div>
    </div>
  </div>

<script>
(function(){
  // === BESTANDSNAMEN IN JE REPO (exact zo uploaden) ===
  const APP_30  = "./FTA30T.html";
  const APP_140 = "./FTA140T.html";

  const hint = document.getElementById('hint');
  const urlBox = document.getElementById('urlBox');

  // menu-url bepalen (werkt op GitHub Pages, en ook lokaal)
  const MENU_URL = location.href.split('#')[0];
  urlBox.textContent = "Menu-link: " + MENU_URL;

  function openApp(path, sameTab){
    if(sameTab) window.location.href = path;
    else window.open(path, "_blank", "noopener");
  }

  document.getElementById('open30Btn').addEventListener('click', ()=> openApp(APP_30, true));
  document.getElementById('open140Btn').addEventListener('click', ()=> openApp(APP_140, true));

  // Enter als snelstart (desktop): opent FTA140T
  window.addEventListener('keydown', (e)=>{
    if(e.key === "Enter"){
      if(document.activeElement && (document.activeElement.tagName === "BUTTON")) return;
      openApp(APP_140, true);
    }
  });

  document.getElementById('openNewTabBtn').addEventListener('click', ()=>{
    window.open(MENU_URL, "_blank", "noopener");
  });

  document.getElementById('copyLinkBtn').addEventListener('click', async ()=>{
    try{
      await navigator.clipboard.writeText(MENU_URL);
      hint.innerHTML = 'Menulink gekopieerd. Plak in WhatsApp of Mail.';
    }catch(e){
      hint.innerHTML = 'Kopiëren lukt niet automatisch. Kopieer deze link: <code>' + MENU_URL + '</code>';
    }
  });

  document.getElementById('addHomeBtn').addEventListener('click', ()=>{
    hint.innerHTML =
      '<b>iPhone/iPad (Safari):</b> Deel (vierkantje met pijltje) → <b>Zet op beginscherm</b><br>' +
      '<b>Android (Chrome):</b> Menu ⋮ → <b>Add to Home screen</b>';
  });

  document.getElementById('helpBtn').addEventListener('click', ()=>{
    hint.innerHTML =
      '<b>FTA30+T:</b> compacte basis met 30 tegels.<br>' +
      '<b>FTA140T:</b> 140 tegels in 7 HT-kolommen (20 per kolom).<br>' +
      'Tip: gebruik <code>Opslaan</code> om een nieuwe versie te downloaden.';
  });

  // Bestanden aanwezig?
  Promise.allSettled([
    fetch(APP_30, { method:'HEAD' }),
    fetch(APP_140, { method:'HEAD' })
  ]).then(([r30,r140])=>{
    const miss=[];
    if(!r30.value || !r30.value.ok) miss.push('FTA30T.html');
    if(!r140.value || !r140.value.ok) miss.push('FTA140T.html');
    if(miss.length){
      hint.innerHTML = 'Let op: ontbreekt op GitHub: <code>' + miss.join(', ') + '</code>';
    }
  }).catch(()=>{});

  // ==== QR-code (menu) ====
  const qrCanvas = document.getElementById("qrCanvas");
  const ctx = qrCanvas.getContext("2d");
  const img = new Image();
  img.crossOrigin = "anonymous";
  const qrApi = "https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=" + encodeURIComponent(MENU_URL);

  img.onload = ()=>{
    ctx.clearRect(0,0,qrCanvas.width, qrCanvas.height);
    ctx.fillStyle = "#ffffff";
    ctx.fillRect(0,0,qrCanvas.width, qrCanvas.height);
    ctx.drawImage(img, 0,0, qrCanvas.width, qrCanvas.height);
  };
  img.onerror = ()=>{
    ctx.clearRect(0,0,qrCanvas.width, qrCanvas.height);
    ctx.fillStyle = "#ffffff"; ctx.fillRect(0,0,qrCanvas.width, qrCanvas.height);
    ctx.fillStyle = "#000"; ctx.font = "14px system-ui";
    ctx.fillText("QR laden mislukt.", 18, 98);
  };
  img.src = qrApi;

})();
</script>
</body>
</html>
